<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Transition probability matrix — tpmatrix • hesim</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/simplex/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Transition probability matrix — tpmatrix" />
<meta property="og:description" content="tpmatrix() both defines and evaluates a transition probability matrix in which
elements are expressions. It can be used within define_tparams() to
create a transition probability matrix or directly to create a tparams_transprobs()
object. These are, in turn, ultimately used to create a CohortDtstmTrans object
for simulating health state transitions." />
<meta property="og:image" content="https://hesim-dev.github.io/hesim/logo.png" />


<meta name="robots" content="noindex">

<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-131661920-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-131661920-2');
</script>


  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">hesim</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">0.5.0.9999</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">API</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/intro.html">Introduction to hesim</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Cohort discrete time state transition models</li>
    <li>
      <a href="../articles/markov-cohort.html">Simple Markov cohort model</a>
    </li>
    <li>
      <a href="../articles/markov-inhomogeneous-cohort.html">Time inhomogeneous Markov cohort models</a>
    </li>
    <li>
      <a href="../articles/mlogit.html">Markov models with multinomial logistic regression</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Individual continuous time state transition models</li>
    <li>
      <a href="../articles/markov-inhomogeneous-indiv.html">Time inhomogeneous Markov individual-level models</a>
    </li>
    <li>
      <a href="../articles/mstate.html">Markov and semi-Markov multi-state models</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Partitioned survival analysis</li>
    <li>
      <a href="../articles/psm.html">N-state partitioned survival models</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Decision analysis</li>
    <li>
      <a href="../articles/cea.html">Cost-effectiveness analysis</a>
    </li>
  </ul>
</li>
<li>
  <a href="../articles/benchmarks.html">Benchmarks</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/hesim-dev/hesim/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Transition probability matrix</h1>
    <small class="dont-index">Source: <a href='https://github.com/hesim-dev/hesim/blob/master/R/tpmatrix.R'><code>R/tpmatrix.R</code></a></small>
    <div class="hidden name"><code>tpmatrix.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>tpmatrix()</code> both defines and evaluates a transition probability matrix in which
elements are expressions. It can be used within <code><a href='define_tparams.html'>define_tparams()</a></code> to
create a transition probability matrix or directly to create a <code><a href='tparams_transprobs.html'>tparams_transprobs()</a></code>
object. These are, in turn, ultimately used to create a <a href='CohortDtstmTrans.html'>CohortDtstmTrans</a> object
for simulating health state transitions.</p>
    </div>

    <pre class="usage"><span class='fu'>tpmatrix</span><span class='op'>(</span><span class='va'>...</span>, complement <span class='op'>=</span> <span class='cn'>NULL</span>, states <span class='op'>=</span> <span class='cn'>NULL</span>, prefix <span class='op'>=</span> <span class='st'>""</span>, sep <span class='op'>=</span> <span class='st'>"_"</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>...</th>
      <td><p>Named values of expressions defining elements of the matrix. Each
element of <code>...</code> should either be a vector or a 2-dimensional tabular object
such as a data frame. See "Details" and the examples below.</p></td>
    </tr>
    <tr>
      <th>complement</th>
      <td><p>Either a character vector or a numeric vector denoting the
transitions (i.e., the columns of the tabular object formed from <code>...</code>) that
are complementary (see "Details" below). If a character vector, each element
should be the name of a column in the tabular object; if a numeric vector,
each element should be the index of a column in the tabular object.</p></td>
    </tr>
    <tr>
      <th>states</th>
      <td><p>A character vector of the names of health states in the
transition matrix.</p></td>
    </tr>
    <tr>
      <th>prefix</th>
      <td><p>A prefix that precedes the described transitions between states
used to name a transition. For example, if <code>prefix = "p_"</code> (and <code>sep = "_"</code>),
then a transition between state <code>i</code> and state <code>j</code> will be of the form
<code>"p_states[i]_states[j]"</code>; similarly, if <code>prefix = ""</code>, then the same
transition will be named <code>"states[i]_states[j]"</code>.</p></td>
    </tr>
    <tr>
      <th>sep</th>
      <td><p>A character string to separate the terms representing
state <code>i</code> and state <code>j</code>. For instance, if <code>sep = "."</code>, the resulting name
will be of the form <code>"states[i].states[j]"</code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Returns a <code>tpmatrix</code> object that inherits from <code>data.table</code>
where each column is an element of the transition probability matrix with
elements ordered rowwise.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>A <code>tpmatrix</code> is a 2-dimensional tabular object that stores flattened
square transition probability matrices in each row. Each transition probability
matrix is filled rowwise. The complementary probability (equal to \(1\)
minus the sum of the probabilities of all other elements in a row of a
transition probability matrix) can be conveniently referred to as <code>C</code> or
specified with the <code>complement</code> argument. There can only be one complement
for each row in a transition probability matrix.</p>
<p>The column names are determined by the arguments <code>states</code>, <code>prefix</code>, and <code>sep</code>,
which are passed to <code><a href='tpmatrix_names.html'>tpmatrix_names()</a></code>. If <code>states = NULL</code> (the default),
then the states are named <code>s1</code>, ..., <code>sh</code> where <code>h</code> is the number of health
states.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='define_model.html'>define_model()</a></code>, <code><a href='define_tparams.html'>define_tparams()</a></code>,
<code><a href='tpmatrix_id.html'>tpmatrix_id()</a></code>, <code><a href='tparams_transprobs.html'>tparams_transprobs()</a></code>, <code><a href='CohortDtstmTrans.html'>CohortDtstmTrans()</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='va'>p_12</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>.7</span>, <span class='fl'>.6</span><span class='op'>)</span>
<span class='fu'>tpmatrix</span><span class='op'>(</span>
  <span class='va'>C</span>, <span class='va'>p_12</span>,
  <span class='fl'>0</span>, <span class='fl'>1</span>
<span class='op'>)</span>
</div><div class='output co'>#&gt;    s1_s1 s1_s2 s2_s1 s2_s2
#&gt; 1:   0.3   0.7     0     1
#&gt; 2:   0.4   0.6     0     1</div><div class='input'>
<span class='fu'>tpmatrix</span><span class='op'>(</span>
  <span class='va'>C</span>, <span class='va'>p_12</span>,
  <span class='va'>C</span>, <span class='fl'>1</span>
<span class='op'>)</span>
</div><div class='output co'>#&gt;    s1_s1 s1_s2 s2_s1 s2_s2
#&gt; 1:   0.3   0.7     0     1
#&gt; 2:   0.4   0.6     0     1</div><div class='input'>
<span class='co'># Pass matrix</span>
<span class='va'>pmat</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>matrix</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>.5</span>, <span class='fl'>.5</span>, <span class='fl'>.3</span>, <span class='fl'>.7</span><span class='op'>)</span>, byrow <span class='op'>=</span> <span class='cn'>TRUE</span>, ncol <span class='op'>=</span> <span class='fl'>4</span><span class='op'>)</span>
<span class='fu'>tpmatrix</span><span class='op'>(</span><span class='va'>pmat</span><span class='op'>)</span>
</div><div class='output co'>#&gt;    s1_s1 s1_s2 s2_s1 s2_s2
#&gt; 1:   0.5   0.5   0.3   0.7</div><div class='input'>
<span class='co'># Pass vectors and data frames</span>
<span class='va'>p1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span>
  p_12 <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>.7</span>, <span class='fl'>.6</span><span class='op'>)</span>,
  p_13 <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>.1</span>, <span class='fl'>.2</span><span class='op'>)</span>
<span class='op'>)</span>

<span class='va'>p2</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span>
  p_21 <span class='op'>=</span> <span class='fl'>0</span>,
  p_22 <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>.4</span>, <span class='fl'>.45</span><span class='op'>)</span>,
  p_23 <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>.6</span>, <span class='fl'>.55</span><span class='op'>)</span>
<span class='op'>)</span>

<span class='va'>p3</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span>
  p_31 <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>0</span><span class='op'>)</span>,
  p_32 <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>0</span><span class='op'>)</span>,
  p_33 <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>1</span><span class='op'>)</span>
<span class='op'>)</span>

<span class='fu'>tpmatrix</span><span class='op'>(</span>
  <span class='va'>C</span>, <span class='va'>p1</span>,
  <span class='va'>p2</span>,
  <span class='va'>p3</span>
<span class='op'>)</span>
</div><div class='output co'>#&gt;    s1_s1 s1_s2 s1_s3 s2_s1 s2_s2 s2_s3 s3_s1 s3_s2 s3_s3
#&gt; 1:   0.2   0.7   0.1     0  0.40  0.60     0     0     1
#&gt; 2:   0.2   0.6   0.2     0  0.45  0.55     0     0     1</div><div class='input'>
<span class='co'># Use the 'complement' argument</span>
<span class='va'>pmat</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span>s1_s1 <span class='op'>=</span> <span class='fl'>0</span>, s1_s2 <span class='op'>=</span> <span class='fl'>.5</span>, s2_s1 <span class='op'>=</span> <span class='fl'>.3</span>, s2_s2 <span class='op'>=</span> <span class='fl'>0</span><span class='op'>)</span>
<span class='fu'>tpmatrix</span><span class='op'>(</span><span class='va'>pmat</span>, complement <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"s1_s1"</span>, <span class='st'>"s2_s2"</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;    s1_s1 s1_s2 s2_s1 s2_s2
#&gt; 1:   0.5   0.5   0.3   0.7</div><div class='input'><span class='fu'>tpmatrix</span><span class='op'>(</span><span class='va'>pmat</span>, complement <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>4</span><span class='op'>)</span><span class='op'>)</span> <span class='co'># Can also pass integers</span>
</div><div class='output co'>#&gt;    s1_s1 s1_s2 s2_s1 s2_s2
#&gt; 1:   0.5   0.5   0.3   0.7</div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Devin Incerti, Jeroen P. Jansen.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


