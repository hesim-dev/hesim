<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Create a StateVals object — create_StateVals • hesim</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/simplex/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Create a StateVals object — create_StateVals"><meta property="og:description" content="create_StateVals() is a generic function for creating an object of class
StateVals from a fitted statistical model or a stateval_tbl
object."><meta property="og:image" content="https://hesim-dev.github.io/hesim/logo.png"><meta name="robots" content="noindex"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-131661920-2"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-131661920-2');
</script></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">hesim</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">0.5.1.9999</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">API</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/intro.html">Introduction to hesim</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Cohort discrete time state transition models</li>
    <li>
      <a href="../articles/markov-cohort.html">Simple Markov cohort model</a>
    </li>
    <li>
      <a href="../articles/markov-inhomogeneous-cohort.html">Time inhomogeneous Markov cohort models</a>
    </li>
    <li>
      <a href="../articles/mlogit.html">Markov models with multinomial logistic regression</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Individual continuous time state transition models</li>
    <li>
      <a href="../articles/markov-inhomogeneous-indiv.html">Time inhomogeneous Markov individual-level models</a>
    </li>
    <li>
      <a href="../articles/mstate.html">Markov and semi-Markov multi-state models</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Partitioned survival analysis</li>
    <li>
      <a href="../articles/psm.html">N-state partitioned survival models</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Decision analysis</li>
    <li>
      <a href="../articles/cea.html">Cost-effectiveness analysis</a>
    </li>
  </ul></li>
<li>
  <a href="../articles/benchmarks.html">Benchmarks</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/hesim-dev/hesim/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create a <code>StateVals</code> object</h1>
    <small class="dont-index">Source: <a href="https://github.com/hesim-dev/hesim/blob/HEAD/R/statevals.R" class="external-link"><code>R/statevals.R</code></a></small>
    <div class="hidden name"><code>create_StateVals.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>create_StateVals()</code> is a generic function for creating an object of class
<code><a href="StateVals.html">StateVals</a></code> from a fitted statistical model or a <code><a href="stateval_tbl.html">stateval_tbl</a></code>
object.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">create_StateVals</span><span class="op">(</span><span class="va">object</span>, <span class="va">...</span><span class="op">)</span>

<span class="co"># S3 method for lm</span>
<span class="fu">create_StateVals</span><span class="op">(</span>
  <span class="va">object</span>,
  input_data <span class="op">=</span> <span class="cn">NULL</span>,
  n <span class="op">=</span> <span class="fl">1000</span>,
  uncertainty <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"normal"</span>, <span class="st">"none"</span><span class="op">)</span>,
  <span class="va">...</span>
<span class="op">)</span>

<span class="co"># S3 method for stateval_tbl</span>
<span class="fu">create_StateVals</span><span class="op">(</span><span class="va">object</span>, hesim_data <span class="op">=</span> <span class="cn">NULL</span>, n <span class="op">=</span> <span class="fl">1000</span>, <span class="va">...</span><span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>object</dt>
<dd><p>A model object of the appropriate class.</p></dd>
<dt>...</dt>
<dd><p>Further arguments (<code>time_reset</code> and <code>method</code>) passed to <code><a href="StateVals.html">StateVals$new()</a></code>.</p></dd>
<dt>input_data</dt>
<dd><p>An object of class <code><a href="expand.hesim_data.html">expanded_hesim_data</a></code>.
Must be expanded by treatment strategies, patients, and health states.</p></dd>
<dt>n</dt>
<dd><p>Number of random observations of the parameters to draw when parameters
are fit using a statistical model.</p></dd>
<dt>uncertainty</dt>
<dd><p>Method determining how parameter uncertainty should be handled. See
documentation in <code><a href="create_params.html">create_params()</a></code>.</p></dd>
<dt>hesim_data</dt>
<dd><p>A <code><a href="hesim_data.html">hesim_data</a></code> object. Only required when <code>object</code> is of class
<code><a href="stateval_tbl.html">stateval_tbl</a></code>. See "details".</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A <code><a href="StateVals.html">StateVals</a></code> object.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>If <code>object</code> is a <code>stateval_tbl</code>, then a <code><a href="hesim_data.html">hesim_data</a></code> object is used
to specify treatment strategies, patients, and/or health states not included as
columns in the table, or, to match patients in the table to groups. Not required if
the table includes one row for each treatment strategy, patient, and health state
combination. Patients are matched to groups by specifying both a <code>patient_id</code>
and a <code>grp_var</code> column in the <code>patients</code> table.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>See <code><a href="StateVals.html">StateVals</a></code> for documentation of the class and additional examples.
An example use case for <code>create_StateVals.stateval_tbl()</code> is provided in
the <code><a href="stateval_tbl.html">stateval_tbl()</a></code> documentation.</p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># EXAMPLE FOR `create_statevals.lm()`</span></span>
<span class="r-in"><span class="co">## Simple example comparing two treatment strategies where</span></span>
<span class="r-in"><span class="co">## medical costs vary by sex and health state</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">## Setup model</span></span>
<span class="r-in"><span class="va">hesim_dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="hesim_data.html">hesim_data</a></span><span class="op">(</span></span>
<span class="r-in">  strategies <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>strategy_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span>,</span>
<span class="r-in">  patients <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span class="r-in">    patient_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span class="r-in">    female <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span></span>
<span class="r-in">  <span class="op">)</span>,</span>
<span class="r-in">  states <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span class="r-in">    state_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>,</span>
<span class="r-in">    state_name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"state1"</span>, <span class="st">"state2"</span>, <span class="st">"state3"</span><span class="op">)</span></span>
<span class="r-in">  <span class="op">)</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">## Fit model</span></span>
<span class="r-in"><span class="va">medcost_estimation_data</span> <span class="op">&lt;-</span> <span class="va">psm4_exdata</span><span class="op">$</span><span class="va">costs</span><span class="op">$</span><span class="va">medical</span></span>
<span class="r-in"><span class="va">medcost_estimation_data</span><span class="op">$</span><span class="va">time5</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html" class="external-link">rbinom</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">medcost_estimation_data</span><span class="op">)</span>, </span>
<span class="r-in">                                        <span class="fl">1</span>, <span class="fl">.5</span><span class="op">)</span> <span class="co"># Illustrative time dummy</span></span>
<span class="r-in"><span class="va">medcost_fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">costs</span> <span class="op">~</span> <span class="va">female</span> <span class="op">+</span> <span class="va">state_name</span> <span class="op">+</span> <span class="va">time5</span>, </span>
<span class="r-in">                  data <span class="op">=</span> <span class="va">medcost_estimation_data</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">## Create medical cost model</span></span>
<span class="r-in"><span class="co">### Allow medical costs to vary across time in addition to by patient and </span></span>
<span class="r-in"><span class="co">### health state</span></span>
<span class="r-in"><span class="va">medcost_times</span> <span class="op">&lt;-</span> <span class="fu"><a href="time_intervals.html">time_intervals</a></span><span class="op">(</span></span>
<span class="r-in">  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>time_start <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">3</span>, <span class="fl">5</span><span class="op">)</span>,</span>
<span class="r-in">            time5 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="co"># Time dummy corresponds to time &gt; 5</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-in"><span class="va">medcost_input_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="expand.html">expand</a></span><span class="op">(</span><span class="va">hesim_dat</span>, </span>
<span class="r-in">                             by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"strategies"</span>, <span class="st">"patients"</span>, <span class="st">"states"</span><span class="op">)</span>,</span>
<span class="r-in">                             times <span class="op">=</span> <span class="va">medcost_times</span><span class="op">)</span></span>
<span class="r-in"><span class="va">medcost_model</span> <span class="op">&lt;-</span> <span class="fu">create_StateVals</span><span class="op">(</span><span class="va">medcost_fit</span>, <span class="va">medcost_input_data</span>,</span>
<span class="r-in">                                  n <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">## Explore predictions from medical cost model</span></span>
<span class="r-in"><span class="co">### We can assess predictions at multiple time points</span></span>
<span class="r-in"><span class="va">medcost_model</span><span class="op">$</span><span class="fu">sim</span><span class="op">(</span>t <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">6</span><span class="op">)</span>, type <span class="op">=</span> <span class="st">"predict"</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     sample strategy_id patient_id state_id time    value</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1:      1           1          1        1    1 35375.09</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2:      1           1          1        1    6 34766.14</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3:      1           1          1        2    1 31086.85</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4:      1           1          1        2    6 30477.90</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5:      1           1          1        3    1 36661.84</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6:      1           1          1        3    6 36052.89</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7:      1           1          2        1    1 33251.43</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8:      1           1          2        1    6 32642.48</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9:      1           1          2        2    1 28963.19</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10:      1           1          2        2    6 28354.24</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11:      1           1          2        3    1 34538.19</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12:      1           1          2        3    6 33929.23</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13:      1           2          1        1    1 35375.09</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14:      1           2          1        1    6 34766.14</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15:      1           2          1        2    1 31086.85</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16:      1           2          1        2    6 30477.90</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17:      1           2          1        3    1 36661.84</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18:      1           2          1        3    6 36052.89</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19:      1           2          2        1    1 33251.43</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20:      1           2          2        1    6 32642.48</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21:      1           2          2        2    1 28963.19</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22:      1           2          2        2    6 28354.24</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23:      1           2          2        3    1 34538.19</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24:      1           2          2        3    6 33929.23</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     sample strategy_id patient_id state_id time    value</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Devin Incerti, Jeroen P. Jansen.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a>
2.0.2.</p>
</div>

      </footer></div>

  


  

  </body></html>

