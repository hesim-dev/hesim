<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Transition probability matrix — tpmatrix • hesim</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/simplex/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Transition probability matrix — tpmatrix"><meta property="og:description" content="tpmatrix() both defines and evaluates a transition probability matrix in which
elements are expressions. It can be used within define_tparams() to
create a transition probability matrix or directly to create a tparams_transprobs()
object. These are, in turn, ultimately used to create a CohortDtstmTrans object
for simulating health state transitions."><meta property="og:image" content="https://hesim-dev.github.io/hesim/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-131661920-2"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-131661920-2');
</script></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">hesim</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.5.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">API</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/intro.html">Introduction to hesim</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Cohort discrete time state transition models</li>
    <li>
      <a href="../articles/markov-cohort.html">Simple Markov cohort model</a>
    </li>
    <li>
      <a href="../articles/markov-inhomogeneous-cohort.html">Time inhomogeneous Markov cohort models</a>
    </li>
    <li>
      <a href="../articles/mlogit.html">Markov models with multinomial logistic regression</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Individual continuous time state transition models</li>
    <li>
      <a href="../articles/markov-inhomogeneous-indiv.html">Time inhomogeneous Markov individual-level models</a>
    </li>
    <li>
      <a href="../articles/mstate.html">Markov and semi-Markov multi-state models</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Partitioned survival analysis</li>
    <li>
      <a href="../articles/psm.html">N-state partitioned survival models</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Decision analysis</li>
    <li>
      <a href="../articles/cea.html">Cost-effectiveness analysis</a>
    </li>
  </ul></li>
<li>
  <a href="../articles/benchmarks.html">Benchmarks</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/hesim-dev/hesim/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Transition probability matrix</h1>
    <small class="dont-index">Source: <a href="https://github.com/hesim-dev/hesim/blob/HEAD/R/tpmatrix.R" class="external-link"><code>R/tpmatrix.R</code></a></small>
    <div class="hidden name"><code>tpmatrix.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>tpmatrix()</code> both defines and evaluates a transition probability matrix in which
elements are expressions. It can be used within <code><a href="define_tparams.html">define_tparams()</a></code> to
create a transition probability matrix or directly to create a <code><a href="tparams_transprobs.html">tparams_transprobs()</a></code>
object. These are, in turn, ultimately used to create a <a href="CohortDtstmTrans.html">CohortDtstmTrans</a> object
for simulating health state transitions.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">tpmatrix</span><span class="op">(</span><span class="va">...</span>, complement <span class="op">=</span> <span class="cn">NULL</span>, states <span class="op">=</span> <span class="cn">NULL</span>, prefix <span class="op">=</span> <span class="st">""</span>, sep <span class="op">=</span> <span class="st">"_"</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>...</dt>
<dd><p>Named values of expressions defining elements of the matrix. Each
element of <code>...</code> should either be a vector or a 2-dimensional tabular object
such as a data frame. See "Details" and the examples below.</p></dd>


<dt>complement</dt>
<dd><p>Either a character vector or a numeric vector denoting the
transitions (i.e., the columns of the tabular object formed from <code>...</code>) that
are complementary (see "Details" below). If a character vector, each element
should be the name of a column in the tabular object; if a numeric vector,
each element should be the index of a column in the tabular object.</p></dd>


<dt>states, prefix, sep</dt>
<dd><p>Arguments passed to <code><a href="tpmatrix_names.html">tpmatrix_names()</a></code> for naming
the columns. If <code>states = NULL</code> (the default), then the states are named
<code>s1</code>, ..., <code>sh</code> where <code>h</code> is the number of health states.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>Returns a <code>tpmatrix</code> object that inherits from <code>data.table</code></p>


<p>where each column is an element of the transition probability matrix with
elements ordered rowwise.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>A <code>tpmatrix</code> is a 2-dimensional tabular object that stores flattened
square transition probability matrices in each row. Each transition probability
matrix is filled rowwise. The complementary probability (equal to \(1\)
minus the sum of the probabilities of all other elements in a row of a
transition probability matrix) can be conveniently referred to as <code>C</code> or
specified with the <code>complement</code> argument. There can only be one complement
for each row in a transition probability matrix.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>A <code>tpmatrix</code> is useful because it provides a convenient
way to construct a <code><a href="tparams_transprobs.html">tparams_transprobs</a></code> object, which is the object in
<code>hesim</code> used to specify the transition probabilities required to simulate
Markov chains with the <code><a href="CohortDtstmTrans.html">CohortDtstmTrans</a></code> class. See the
<code><a href="tparams_transprobs.html">tparams_transprobs</a></code> documentation for more details.</p>
<p>The <code><a href="summary.tpmatrix.html">summary.tpmatrix()</a></code> method can be used to summarize a <code>tpmatrix</code>
across parameter samples.</p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">p_12</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.7</span>, <span class="fl">.6</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">tpmatrix</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">C</span>, <span class="va">p_12</span>,</span></span>
<span class="r-in"><span>  <span class="fl">0</span>, <span class="fl">1</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    s1_s1 s1_s2 s2_s1 s2_s2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:   0.3   0.7     0     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:   0.4   0.6     0     1</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">tpmatrix</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">C</span>, <span class="va">p_12</span>,</span></span>
<span class="r-in"><span>  <span class="va">C</span>, <span class="fl">1</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    s1_s1 s1_s2 s2_s1 s2_s2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:   0.3   0.7     0     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:   0.4   0.6     0     1</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Pass matrix</span></span></span>
<span class="r-in"><span><span class="va">pmat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.5</span>, <span class="fl">.5</span>, <span class="fl">.3</span>, <span class="fl">.7</span><span class="op">)</span>, byrow <span class="op">=</span> <span class="cn">TRUE</span>, ncol <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">tpmatrix</span><span class="op">(</span><span class="va">pmat</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    s1_s1 s1_s2 s2_s1 s2_s2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:   0.5   0.5   0.3   0.7</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Pass vectors and data frames</span></span></span>
<span class="r-in"><span><span class="va">p1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  p_12 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.7</span>, <span class="fl">.6</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  p_13 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.1</span>, <span class="fl">.2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">p2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  p_21 <span class="op">=</span> <span class="fl">0</span>,</span></span>
<span class="r-in"><span>  p_22 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.4</span>, <span class="fl">.45</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  p_23 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.6</span>, <span class="fl">.55</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">p3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  p_31 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  p_32 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  p_33 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">tpmatrix</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">C</span>, <span class="va">p1</span>,</span></span>
<span class="r-in"><span>  <span class="va">p2</span>,</span></span>
<span class="r-in"><span>  <span class="va">p3</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    s1_s1 s1_s2 s1_s3 s2_s1 s2_s2 s2_s3 s3_s1 s3_s2 s3_s3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:   0.2   0.7   0.1     0  0.40  0.60     0     0     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:   0.2   0.6   0.2     0  0.45  0.55     0     0     1</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Use the 'complement' argument</span></span></span>
<span class="r-in"><span><span class="va">pmat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>s1_s1 <span class="op">=</span> <span class="fl">0</span>, s1_s2 <span class="op">=</span> <span class="fl">.5</span>, s2_s1 <span class="op">=</span> <span class="fl">.3</span>, s2_s2 <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">tpmatrix</span><span class="op">(</span><span class="va">pmat</span>, complement <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"s1_s1"</span>, <span class="st">"s2_s2"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    s1_s1 s1_s2 s2_s1 s2_s2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:   0.5   0.5   0.3   0.7</span>
<span class="r-in"><span><span class="fu">tpmatrix</span><span class="op">(</span><span class="va">pmat</span>, complement <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span> <span class="co"># Can also pass integers</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    s1_s1 s1_s2 s2_s1 s2_s2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:   0.5   0.5   0.3   0.7</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Can control column names</span></span></span>
<span class="r-in"><span><span class="fu">tpmatrix</span><span class="op">(</span><span class="va">pmat</span>, complement <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">4</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>         states <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"state1"</span>, <span class="st">"state2"</span><span class="op">)</span>, sep <span class="op">=</span> <span class="st">"."</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    state1.state1 state1.state2 state2.state1 state2.state2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:           0.5           0.5           0.3           0.7</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Devin Incerti, Jeroen P. Jansen.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer></div>

  


  

  </body></html>

