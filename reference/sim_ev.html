<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Expected values from state probabilities — sim_ev • hesim</title><!-- favicons --><link rel="icon" type="image/png" sizes="48x48" href="../favicon-48x48.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/simplex/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Expected values from state probabilities — sim_ev"><meta property="og:description" content="Simulate expected values as a function of simulated state occupancy
probabilities, with simulation of costs and quality-adjusted life-years
(QALYs) as particular use cases."><meta property="og:image" content="https://hesim-dev.github.io/hesim/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-131661920-2"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-131661920-2');
</script></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">hesim</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.5.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">API</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/intro.html">Introduction to hesim</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Cohort discrete time state transition models</li>
    <li>
      <a href="../articles/markov-cohort.html">Simple Markov cohort model</a>
    </li>
    <li>
      <a href="../articles/markov-inhomogeneous-cohort.html">Time inhomogeneous Markov cohort models</a>
    </li>
    <li>
      <a href="../articles/mlogit.html">Markov models with multinomial logistic regression</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Individual continuous time state transition models</li>
    <li>
      <a href="../articles/markov-inhomogeneous-indiv.html">Time inhomogeneous Markov individual-level models</a>
    </li>
    <li>
      <a href="../articles/mstate.html">Markov and semi-Markov multi-state models</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Partitioned survival analysis</li>
    <li>
      <a href="../articles/psm.html">N-state partitioned survival models</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Decision analysis</li>
    <li>
      <a href="../articles/cea.html">Cost-effectiveness analysis</a>
    </li>
  </ul></li>
<li>
  <a href="../articles/benchmarks.html">Benchmarks</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/hesim-dev/hesim/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Expected values from state probabilities</h1>
    <small class="dont-index">Source: <a href="https://github.com/hesim-dev/hesim/blob/main/R/sim-general.R" class="external-link"><code>R/sim-general.R</code></a></small>
    <div class="hidden name"><code>sim_ev.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Simulate expected values as a function of simulated state occupancy
probabilities, with simulation of costs and quality-adjusted life-years
(QALYs) as particular use cases.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># S3 method for class 'stateprobs'</span></span>
<span><span class="fu">sim_ev</span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  models <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  dr <span class="op">=</span> <span class="fl">0.03</span>,</span>
<span>  integrate_method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"trapz"</span>, <span class="st">"riemann_left"</span>, <span class="st">"riemann_right"</span><span class="op">)</span>,</span>
<span>  value_name <span class="op">=</span> <span class="st">"value"</span>,</span>
<span>  outcome_name <span class="op">=</span> <span class="st">"outcome"</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">sim_qalys</span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  <span class="va">model</span>,</span>
<span>  dr <span class="op">=</span> <span class="fl">0.03</span>,</span>
<span>  integrate_method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"trapz"</span>, <span class="st">"riemann_left"</span>, <span class="st">"riemann_right"</span><span class="op">)</span>,</span>
<span>  lys <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">sim_costs</span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  <span class="va">models</span>,</span>
<span>  dr <span class="op">=</span> <span class="fl">0.03</span>,</span>
<span>  integrate_method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"trapz"</span>, <span class="st">"riemann_left"</span>, <span class="st">"riemann_right"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-object">object<a class="anchor" aria-label="anchor" href="#arg-object"></a></dt>
<dd><p>A <code><a href="stateprobs.html">stateprobs</a></code> object.</p></dd>


<dt id="arg-dr">dr<a class="anchor" aria-label="anchor" href="#arg-dr"></a></dt>
<dd><p>Discount rate.</p></dd>


<dt id="arg-integrate-method">integrate_method<a class="anchor" aria-label="anchor" href="#arg-integrate-method"></a></dt>
<dd><p>Method used to integrate state values when computing
costs or QALYs. Options are <code>trapz</code> (the default) for the trapezoid rule,
<code>riemann_left</code> left for a left Riemann sum, and
<code>riemann_right</code> right for a right Riemann sum.</p></dd>


<dt id="arg-value-name">value_name<a class="anchor" aria-label="anchor" href="#arg-value-name"></a></dt>
<dd><p>Name of the column containing values of the outcome. Default
is <code>"value"</code>.</p></dd>


<dt id="arg-outcome-name">outcome_name<a class="anchor" aria-label="anchor" href="#arg-outcome-name"></a></dt>
<dd><p>Name of the column indicating the outcome corresponding
to each model. Only used if <code>models</code> is a list. Default is <code>"outcome"</code>.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Currently unused.</p></dd>


<dt id="arg-model-models">model, models<a class="anchor" aria-label="anchor" href="#arg-model-models"></a></dt>
<dd><p>An object or list of objects of class <code><a href="StateVals.html">StateVals</a></code> used to
model state values. When using <code>sim_qalys()</code>, this should be
a single model for utility. With <code>sim_costs()</code>, a list of models should be
used with one model for each cost category. Finally, with <code>sim_ev()</code>,
this may either be a single model or a list of models. May also be <code>NULL</code>,
in which case length of stay is computed based on the state probabilities
contained in <code>object</code>.</p></dd>


<dt id="arg-lys">lys<a class="anchor" aria-label="anchor" href="#arg-lys"></a></dt>
<dd><p>If <code>TRUE</code>, then life-years are simulated in addition to
QALYs.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p><code>sim_ev()</code> returns a <code>data.table</code> with the following columns:</p><dl><dt>sample</dt>
<dd><p>A random sample from the PSA.</p></dd>

<dt>strategy_id</dt>
<dd><p>The treatment strategy ID.</p></dd>

<dt>patient_id</dt>
<dd><p>The patient ID.</p></dd>

<dt>grp_id</dt>
<dd><p>The subgroup ID.</p></dd>

<dt>state_id</dt>
<dd><p>The health state ID.</p></dd>

<dt>dr</dt>
<dd><p>The rate used to discount costs.</p></dd>

<dt>outcome</dt>
<dd><p>The outcome corresponding to each model in <code>models</code>.
Only included if <code>models</code> is a list.</p></dd>

<dt>value</dt>
<dd><p>The expected value.</p></dd>


</dl><p>The names of the <code>outcome</code> and <code>value</code> columns may be changed with the
<code>value_name</code> and <code>outcome_name</code> arguments. <code>sim_costs()</code> and <code>sim_qalys()</code>
return similar objects, that are of class <code><a href="costs.html">costs</a></code> and <code><a href="qalys.html">qalys</a></code>, respectively.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>Expected values in cohort models (i.e.,  those implemented with
the <code><a href="CohortDtstm.html">CohortDtstm</a></code> and <code><a href="Psm.html">Psm</a></code> classes) are mean outcomes for patients comprising
the cohort. The method used to simulate expected values depends on the
<code>$method</code> field in the <code><a href="StateVals.html">StateVals</a></code> object(s) stored in <code>model(s)</code>. If
<code>$method = "starting"</code>, then state values represent a one-time value that
occurs at time 0.</p>
<p>The more common use case is <code>$method = "wlos"</code>, or a "weighted length of stay".
That is, expected values for each health state can be thought of as state values
weighted by the time a patient spends in each state (and discounted by a
discount factor that depends on the discount rate <code>dr</code>). The
precise computation proceeds in four steps. In the first step, the probability
of being in each health state at each discrete time point is simulated
(this is the output contained in the <code><a href="stateprobs.html">stateprobs</a></code> object). Second, a
<code><a href="StateVals.html">StateVals</a></code> model is used to predict state values at each time point.
Third an expected value at each time point is computed by multiplying the
state probability, the state value, and the discount factor. Fourth, the
expected values at each time point are summed across all time points.</p>
<p>The summation in the fourth step can be thought of as a discrete approximation
of an integral. In particular, the limits of integration can be partitioned
into time intervals, with each interval containing a start and an end.
The <code>integrate_method</code> argument determines the approach used
for this approximation:</p><ol><li><p>A left Riemann sum (<code>integrate_method = "riemann_left"</code>) uses expected values
at the start of each time interval.</p></li>
<li><p>A right Riemann sum (<code>integrate_method = "riemann_right"</code>) uses expected values
at the end of each time interval.</p></li>
<li><p>The trapezoid rule (<code>integrate_method = "trapz"</code>) averages expected values
at the start and end of each time interval. (This will generally be the
most accurate and is recommended.)</p></li>
</ol><p>Mathematical details are provided in the reference within the "References"
section below.</p>
    </div>
    <div id="note">
    <h2>Note</h2>
    <p>The ID variables in the state value models in <code>models</code> must be
consistent with the ID variables contained in <code>object</code>. In particular,
the <code>models</code> should predict state values for each non-absorbing health state
in <code>object</code>; that is, the number of health states modeled with the
<code>models</code> should equal the number of health states in <code>object</code> less the number
of absorbing states.</p>
<p>The absorbing states are saved as an attribute named <code>absorbing</code> to
<code><a href="stateprobs.html">stateprobs</a></code> objects. When simulating state probabilities with a
<code><a href="CohortDtstmTrans.html">CohortDtstmTrans</a></code> object, the absorbing state is determined by the
<code>absorbing</code> field in the class; in a <code>Psm</code> (or with
<code><a href="sim_stateprobs.survival.html">sim_stateprobs.survival()</a></code>), the absorbing state is always equal to the
final health state.</p>
    </div>
    <div id="references">
    <h2>References</h2>
    <p><a href="https://arxiv.org/abs/2102.09437" class="external-link">Incerti and Jansen (2021)</a>.
See Section 2.1 for mathematical details.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>State probabilities can be simulated using the
<code>$sim_stateprobs()</code> methods from either the <code><a href="CohortDtstmTrans.html">CohortDtstmTrans</a></code>
(or <code><a href="CohortDtstm.html">CohortDtstm</a></code>) or <code><a href="Psm.html">Psm</a></code> classes. State probabilities can also be
computed directly from survival curves with the generic method
<code><a href="sim_stateprobs.survival.html">sim_stateprobs.survival()</a></code>.</p>
<p>Costs and QALYs are typically computed within the <code>R6</code> model classes
using the <code>$sim_costs()</code> and <code>$sim_qalys()</code> methods. For instance, see the
documentation and examples for the <code><a href="CohortDtstm.html">CohortDtstm</a></code> and <code><a href="Psm.html">Psm</a></code> classes.
The <code>sim_qalys()</code> and <code>sim_costs()</code> functions are exported to give users
additional flexibility when creating their own modeling pipelines.
<code>sim_ev()</code> may be useful for computing outcomes other than costs or QALYs.</p>
<p><code><a href="costs.html">costs</a></code> and <code><a href="qalys.html">qalys</a></code> objects can be passed to <code><a href="summarize_ce.html">summarize_ce()</a></code> to
create a cost-effectiveness object for performing a cost-effectiveness analysis
with <code><a href="cea.html">cea()</a></code>. Although note that typically the <code>$summarize()</code> method
belonging to the <code><a href="CohortDtstm.html">CohortDtstm</a></code> or <code><a href="Psm.html">Psm</a></code> classes would be used instead.</p>
<p>Use the <code><a href="IndivCtstm.html">IndivCtstm</a></code> class to simulate costs and QALYs with an individual
continuous-time state transition model.</p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># We need (i) a state probability object and (ii) a model for state values</span></span></span>
<span class="r-in"><span><span class="co">## We should start by setting up our decision problem</span></span></span>
<span class="r-in"><span><span class="va">hesim_dat</span> <span class="op">&lt;-</span>  <span class="fu"><a href="hesim_data.html">hesim_data</a></span><span class="op">(</span>strategies <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>strategy_id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                         patients <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>patient_id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                         states <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>state_id <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">input_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="expand.html">expand</a></span><span class="op">(</span><span class="va">hesim_dat</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"strategies"</span>, <span class="st">"patients"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## (i) Simulate a state probability object</span></span></span>
<span class="r-in"><span><span class="va">tpmat_id</span> <span class="op">&lt;-</span> <span class="fu"><a href="tpmatrix_id.html">tpmatrix_id</a></span><span class="op">(</span><span class="va">input_data</span>, n_samples <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> </span></span>
<span class="r-in"><span><span class="va">p_12</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">tpmat_id</span><span class="op">$</span><span class="va">strategy_id</span> <span class="op">==</span> <span class="fl">1</span>, <span class="fl">.15</span>, <span class="fl">.1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">tpmat</span> <span class="op">&lt;-</span> <span class="fu"><a href="tpmatrix.html">tpmatrix</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">C</span>, <span class="va">p_12</span>,</span></span>
<span class="r-in"><span>  <span class="fl">0</span>, <span class="fl">1</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">transmod</span> <span class="op">&lt;-</span> <span class="va"><a href="CohortDtstmTrans.html">CohortDtstmTrans</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>params <span class="op">=</span> <span class="fu"><a href="tparams_transprobs.html">tparams_transprobs</a></span><span class="op">(</span><span class="va">tpmat</span>, <span class="va">tpmat_id</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">stprobs</span> <span class="op">&lt;-</span> <span class="va">transmod</span><span class="op">$</span><span class="fu">sim_stateprobs</span><span class="op">(</span>n_cycles <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Construct model for state values</span></span></span>
<span class="r-in"><span><span class="va">outcome_tbl</span> <span class="op">&lt;-</span> <span class="fu"><a href="stateval_tbl.html">stateval_tbl</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    state_id <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>    est <span class="op">=</span> <span class="fl">5000</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  dist <span class="op">=</span> <span class="st">"fixed"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">outmod</span> <span class="op">&lt;-</span> <span class="fu"><a href="create_StateVals.html">create_StateVals</a></span><span class="op">(</span><span class="va">outcome_tbl</span>, n <span class="op">=</span> <span class="fl">2</span>, hesim_data <span class="op">=</span> <span class="va">hesim_dat</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># We can then simulate expected values</span></span></span>
<span class="r-in"><span><span class="co">## The generic expected values function</span></span></span>
<span class="r-in"><span><span class="fu">sim_ev</span><span class="op">(</span><span class="va">stprobs</span>, models <span class="op">=</span> <span class="va">outmod</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     sample strategy_id patient_id grp_id state_id    dr    value</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      &lt;num&gt;       &lt;int&gt;      &lt;int&gt;  &lt;int&gt;    &lt;int&gt; &lt;num&gt;    &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1:      1           1          1      1        1  0.03 11429.69</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2:      1           1          2      1        1  0.03 11429.69</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3:      1           1          3      1        1  0.03 11429.69</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4:      1           2          1      1        1  0.03 12346.79</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5:      1           2          2      1        1  0.03 12346.79</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6:      1           2          3      1        1  0.03 12346.79</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7:      2           1          1      1        1  0.03 11429.69</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8:      2           1          2      1        1  0.03 11429.69</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9:      2           1          3      1        1  0.03 11429.69</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10:      2           2          1      1        1  0.03 12346.79</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11:      2           2          2      1        1  0.03 12346.79</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12:      2           2          3      1        1  0.03 12346.79</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## We can also pass a list of models</span></span></span>
<span class="r-in"><span><span class="fu">sim_ev</span><span class="op">(</span><span class="va">stprobs</span>, models <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>`Outcome 1` <span class="op">=</span> <span class="va">outmod</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     sample strategy_id patient_id grp_id state_id    dr   outcome    value</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      &lt;num&gt;       &lt;int&gt;      &lt;int&gt;  &lt;int&gt;    &lt;int&gt; &lt;num&gt;    &lt;char&gt;    &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1:      1           1          1      1        1  0.03 Outcome 1 11429.69</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2:      1           1          2      1        1  0.03 Outcome 1 11429.69</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3:      1           1          3      1        1  0.03 Outcome 1 11429.69</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4:      1           2          1      1        1  0.03 Outcome 1 12346.79</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5:      1           2          2      1        1  0.03 Outcome 1 12346.79</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6:      1           2          3      1        1  0.03 Outcome 1 12346.79</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7:      2           1          1      1        1  0.03 Outcome 1 11429.69</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8:      2           1          2      1        1  0.03 Outcome 1 11429.69</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9:      2           1          3      1        1  0.03 Outcome 1 11429.69</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10:      2           2          1      1        1  0.03 Outcome 1 12346.79</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11:      2           2          2      1        1  0.03 Outcome 1 12346.79</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12:      2           2          3      1        1  0.03 Outcome 1 12346.79</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Suppose the outcome were a cost category. Then we might</span></span></span>
<span class="r-in"><span><span class="co">## prefer the following:</span></span></span>
<span class="r-in"><span><span class="fu">sim_costs</span><span class="op">(</span><span class="va">stprobs</span>, models <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>drug <span class="op">=</span> <span class="va">outmod</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     sample strategy_id patient_id grp_id state_id    dr category    costs</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      &lt;num&gt;       &lt;int&gt;      &lt;int&gt;  &lt;int&gt;    &lt;int&gt; &lt;num&gt;   &lt;char&gt;    &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1:      1           1          1      1        1  0.03     drug 11429.69</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2:      1           1          2      1        1  0.03     drug 11429.69</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3:      1           1          3      1        1  0.03     drug 11429.69</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4:      1           2          1      1        1  0.03     drug 12346.79</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5:      1           2          2      1        1  0.03     drug 12346.79</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6:      1           2          3      1        1  0.03     drug 12346.79</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7:      2           1          1      1        1  0.03     drug 11429.69</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8:      2           1          2      1        1  0.03     drug 11429.69</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9:      2           1          3      1        1  0.03     drug 11429.69</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10:      2           2          1      1        1  0.03     drug 12346.79</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11:      2           2          2      1        1  0.03     drug 12346.79</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12:      2           2          3      1        1  0.03     drug 12346.79</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Length of stay is computed if there is no state value model</span></span></span>
<span class="r-in"><span><span class="fu">sim_ev</span><span class="op">(</span><span class="va">stprobs</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     sample strategy_id patient_id grp_id state_id    value</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      &lt;num&gt;       &lt;int&gt;      &lt;int&gt;  &lt;int&gt;    &lt;num&gt;    &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1:      1           1          1      1        1 2.285938</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2:      1           1          2      1        1 2.285938</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3:      1           1          3      1        1 2.285938</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4:      1           2          1      1        1 2.469358</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5:      1           2          2      1        1 2.469358</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6:      1           2          3      1        1 2.469358</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7:      2           1          1      1        1 2.285938</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8:      2           1          2      1        1 2.285938</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9:      2           1          3      1        1 2.285938</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10:      2           2          1      1        1 2.469358</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11:      2           2          2      1        1 2.469358</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12:      2           2          3      1        1 2.469358</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Devin Incerti, Jeroen P. Jansen, Mark Clements.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

      </footer></div>






  </body></html>

