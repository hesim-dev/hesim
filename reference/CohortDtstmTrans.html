<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Transitions for a cohort discrete time state transition model — CohortDtstmTrans • hesim</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/simplex/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Transitions for a cohort discrete time state transition model — CohortDtstmTrans"><meta property="og:description" content="Simulate health state transitions in a cohort discrete time state transition model."><meta property="og:image" content="https://hesim-dev.github.io/hesim/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-131661920-2"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-131661920-2');
</script></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">hesim</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.5.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">API</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/intro.html">Introduction to hesim</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Cohort discrete time state transition models</li>
    <li>
      <a href="../articles/markov-cohort.html">Simple Markov cohort model</a>
    </li>
    <li>
      <a href="../articles/markov-inhomogeneous-cohort.html">Time inhomogeneous Markov cohort models</a>
    </li>
    <li>
      <a href="../articles/mlogit.html">Markov models with multinomial logistic regression</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Individual continuous time state transition models</li>
    <li>
      <a href="../articles/markov-inhomogeneous-indiv.html">Time inhomogeneous Markov individual-level models</a>
    </li>
    <li>
      <a href="../articles/mstate.html">Markov and semi-Markov multi-state models</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Partitioned survival analysis</li>
    <li>
      <a href="../articles/psm.html">N-state partitioned survival models</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Decision analysis</li>
    <li>
      <a href="../articles/cea.html">Cost-effectiveness analysis</a>
    </li>
  </ul></li>
<li>
  <a href="../articles/benchmarks.html">Benchmarks</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/hesim-dev/hesim/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Transitions for a cohort discrete time state transition model</h1>
    <small class="dont-index">Source: <a href="https://github.com/hesim-dev/hesim/blob/HEAD/R/dtstm.R" class="external-link"><code>R/dtstm.R</code></a></small>
    <div class="hidden name"><code>CohortDtstmTrans.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Simulate health state transitions in a cohort discrete time state transition model.</p>
    </div>


    <div id="format">
    <h2>Format</h2>
    <p>An <a href="https://r6.r-lib.org/reference/R6Class.html" class="external-link">R6::R6Class</a> object.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="create_CohortDtstmTrans.html">create_CohortDtstmTrans()</a></code> creates a <code>CohortDtstmTrans</code> object from either
a fitted statistical model or a parameter object. A complete economic model can be implemented
with the <code><a href="CohortDtstm.html">CohortDtstm</a></code> class.</p></div>
    </div>
    <div id="public-fields">
    <h2>Public fields</h2>
    <p></p><div class="r6-fields"><dl><dt><code>params</code></dt>
<dd><p>Parameters for simulating health state transitions.
Supports objects of class <code><a href="tparams_transprobs.html">tparams_transprobs</a></code> or <code><a href="params_mlogit_list.html">params_mlogit_list</a></code>.</p></dd>


<dt><code>input_data</code></dt>
<dd><p>An object of class <code><a href="input_mats.html">input_mats</a></code>.</p></dd>


<dt><code>cycle_length</code></dt>
<dd><p>The length of a model cycle in terms of years.
The default is <code>1</code> meaning that model cycles are 1 year long.</p></dd>


<dt><code>absorbing</code></dt>
<dd><p>A numeric vector denoting the states that are
absorbing states; i.e., states that cannot be transitioned from.
Each element should correspond to a <code>state_id</code>,
which should, in turn, be the index of the health state.</p></dd>


</dl><p></p></div>
    </div>
    <div id="active-bindings">
    <h2>Active bindings</h2>
    <p></p><div class="r6-active-bindings"><dl><dt><code>start_stateprobs</code></dt>
<dd><p>A non-negative vector with length equal to the number of
health states containing the probability that the cohort is in each health
state at the start of the simulation. For example,
if there were three states and the cohort began the simulation in state 1,
then <code>start_stateprobs = c(1, 0, 0)</code>. Automatically normalized to sum to 1.
If <code>NULL</code>, then a vector with the first element equal to 1 and
all remaining elements equal to 0.</p></dd>


<dt><code>trans_mat</code></dt>
<dd><p>A transition matrix describing the states and transitions
in a discrete-time multi-state model. Only required if the model is
parameterized using multinomial logistic regression. The <code>(i,j)</code> element
represents a transition from state <code>i</code> to state <code>j</code>. Each possible transition
from row <code>i</code> should be based on a separate multinomial logistic regression
and ordered from <code>0</code> to <code>K - 1</code> where <code>K</code> is the number of
possible transitions. Transitions that are not possible should be <code>NA</code>.
and the reference category for each row should be <code>0</code>.</p></dd>


</dl><p></p></div>
    </div>
    <div id="methods">
    <h2>Methods</h2>
    
<div class="section">
<h3 id="public-methods">Public methods<a class="anchor" aria-label="anchor" href="#public-methods"></a></h3>

<ul><li><p><a href="#method-CohortDtstmTrans-new"><code>CohortDtstmTrans$new()</code></a></p></li>
<li><p><a href="#method-CohortDtstmTrans-sim_stateprobs"><code>CohortDtstmTrans$sim_stateprobs()</code></a></p></li>
<li><p><a href="#method-CohortDtstmTrans-clone"><code>CohortDtstmTrans$clone()</code></a></p></li>
</ul></div><p></p><hr><a id="method-CohortDtstmTrans-new"></a><div class="section">
<h3 id="method-new-">Method <code>new()</code><a class="anchor" aria-label="anchor" href="#method-new-"></a></h3>
<p>Create a new <code>CohortDtstmTrans</code> object.</p><div class="section">
<h4 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va"><a href="../reference/CohortDtstmTrans.html">CohortDtstmTrans</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span>
<span>  <span class="va">params</span>,</span>
<span>  input_data <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  trans_mat <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  start_stateprobs <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cycle_length <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  absorbing <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h4>
<p></p><div class="arguments"><dl><dt><code>params</code></dt>
<dd><p>The <code>params</code> field.</p></dd>


<dt><code>input_data</code></dt>
<dd><p>The <code>input_data</code> field.</p></dd>


<dt><code>trans_mat</code></dt>
<dd><p>The <code>trans_mat</code> field.</p></dd>


<dt><code>start_stateprobs</code></dt>
<dd><p>The <code>start_stateprobs</code> field.</p></dd>


<dt><code>cycle_length</code></dt>
<dd><p>The <code>cycle_length</code> field.</p></dd>


<dt><code>absorbing</code></dt>
<dd><p>The <code>absorbing</code> field. If <code>NULL</code>, then the constructor
will determine which states are absorbing automatically; non <code>NULL</code> values
will override this behavior.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns">Returns<a class="anchor" aria-label="anchor" href="#returns"></a></h4>
<p>A new <code>CohortDtstmTrans</code> object.</p>
</div>

</div><p></p><hr><a id="method-CohortDtstmTrans-sim_stateprobs"></a><div class="section">
<h3 id="method-sim-stateprobs-">Method <code><a href="sim_stateprobs.html">sim_stateprobs()</a></code><a class="anchor" aria-label="anchor" href="#method-sim-stateprobs-"></a></h3>
<p>Simulate probability of being in each health state during each model cycle.</p><div class="section">
<h4 id="usage-1">Usage<a class="anchor" aria-label="anchor" href="#usage-1"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">CohortDtstmTrans</span><span class="op">$</span><span class="fu">sim_stateprobs</span><span class="op">(</span><span class="va">n_cycles</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-1">Arguments<a class="anchor" aria-label="anchor" href="#arguments-1"></a></h4>
<p></p><div class="arguments"><dl><dt><code>n_cycles</code></dt>
<dd><p>The number of model cycles to simulate the model for.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-1">Returns<a class="anchor" aria-label="anchor" href="#returns-1"></a></h4>
<p>An object of class <code><a href="stateprobs.html">stateprobs</a></code>.</p>
</div>

</div><p></p><hr><a id="method-CohortDtstmTrans-clone"></a><div class="section">
<h3 id="method-clone-">Method <code>clone()</code><a class="anchor" aria-label="anchor" href="#method-clone-"></a></h3>
<p>The objects of this class are cloneable with this method.</p><div class="section">
<h4 id="usage-2">Usage<a class="anchor" aria-label="anchor" href="#usage-2"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">CohortDtstmTrans</span><span class="op">$</span><span class="fu">clone</span><span class="op">(</span>deep <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-2">Arguments<a class="anchor" aria-label="anchor" href="#arguments-2"></a></h4>
<p></p><div class="arguments"><dl><dt><code>deep</code></dt>
<dd><p>Whether to make a deep clone.</p></dd>


</dl><p></p></div>
</div>

</div>

    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/chjackson/msm" class="external-link">"msm"</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://r-datatable.com" class="external-link">"data.table"</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">101</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># We consider two examples that have the same treatment strategies and patients.</span></span></span>
<span class="r-in"><span><span class="co"># One model is parameterized by fitting a multi-state model with the "msm"</span></span></span>
<span class="r-in"><span><span class="co"># package; in the second model, the parameters are entered "manually" with</span></span></span>
<span class="r-in"><span><span class="co"># a "params_mlogit_list" object.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># MODEL SETUP</span></span></span>
<span class="r-in"><span><span class="va">strategies</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  strategy_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  strategy_name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"SOC"</span>, <span class="st">"New 1"</span>, <span class="st">"New 2"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">patients</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></span><span class="op">(</span>patient_id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">hesim_dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="hesim_data.html">hesim_data</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  strategies <span class="op">=</span> <span class="va">strategies</span>,</span></span>
<span class="r-in"><span>  patients <span class="op">=</span> <span class="va">patients</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># EXAMPLE #1: msm</span></span></span>
<span class="r-in"><span><span class="co">## Fit multi-state model with panel data via msm</span></span></span>
<span class="r-in"><span><span class="va">qinit</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.28163</span>, <span class="fl">0.01239</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0.10204</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://chjackson.github.io/msm/reference/msm.html" class="external-link">msm</a></span><span class="op">(</span><span class="va">state_id</span> <span class="op">~</span> <span class="va">time</span>, subject <span class="op">=</span> <span class="va">patient_id</span>,</span></span>
<span class="r-in"><span>           data <span class="op">=</span> <span class="va">onc3p</span><span class="op">[</span><span class="va">patient_id</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="va">patient_id</span>, <span class="fl">100</span><span class="op">)</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>           covariates <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"1-2"</span> <span class="op">=</span><span class="op">~</span> <span class="va">strategy_name</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>           qmatrix <span class="op">=</span> <span class="va">qinit</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Simulation model</span></span></span>
<span class="r-in"><span><span class="va">transmod_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="expand.html">expand</a></span><span class="op">(</span><span class="va">hesim_dat</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">transmod</span> <span class="op">&lt;-</span> <span class="fu"><a href="create_CohortDtstmTrans.html">create_CohortDtstmTrans</a></span><span class="op">(</span><span class="va">fit</span>,</span></span>
<span class="r-in"><span>                                    input_data <span class="op">=</span> <span class="va">transmod_data</span>,</span></span>
<span class="r-in"><span>                                    cycle_length <span class="op">=</span> <span class="fl">1</span><span class="op">/</span><span class="fl">2</span>,</span></span>
<span class="r-in"><span>                                    fixedpars <span class="op">=</span> <span class="fl">2</span>,</span></span>
<span class="r-in"><span>                                    n <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">transmod</span><span class="op">$</span><span class="fu">sim_stateprobs</span><span class="op">(</span>n_cycles <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      sample strategy_id patient_id grp_id state_id     t        prob</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       &lt;num&gt;       &lt;int&gt;      &lt;int&gt;  &lt;int&gt;    &lt;num&gt; &lt;num&gt;       &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1:      1           1          1      1        1   0.0 1.000000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   2:      1           1          1      1        1   0.5 0.792695102</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   3:      1           1          1      1        1   1.0 0.628365524</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   4:      1           1          1      1        2   0.0 0.000000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   5:      1           1          1      1        2   0.5 0.202046511</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  ---                                                                </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 104:      2           3          2      1        2   0.5 0.184425447</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 105:      2           3          2      1        2   1.0 0.325475890</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 106:      2           3          2      1        3   0.0 0.000000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 107:      2           3          2      1        3   0.5 0.004553194</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 108:      2           3          2      1        3   1.0 0.016768466</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># EXAMPLE #2: params_mlogit_list</span></span></span>
<span class="r-in"><span><span class="co">## Input data</span></span></span>
<span class="r-in"><span><span class="va">transmod_data</span><span class="op">[</span>, <span class="va">intercept</span> <span class="op">:=</span> <span class="fl">1</span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    strategy_id patient_id strategy_name intercept</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          &lt;num&gt;      &lt;int&gt;        &lt;char&gt;     &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:           1          1           SOC         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:           1          2           SOC         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:           2          1         New 1         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4:           2          2         New 1         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5:           3          1         New 2         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6:           3          2         New 2         1</span>
<span class="r-in"><span><span class="va">transmod_data</span><span class="op">[</span>, <span class="va">new1</span> <span class="op">:=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">strategy_name</span> <span class="op">==</span> <span class="st">"New 1"</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    strategy_id patient_id strategy_name intercept  new1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          &lt;num&gt;      &lt;int&gt;        &lt;char&gt;     &lt;num&gt; &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:           1          1           SOC         1     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:           1          2           SOC         1     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:           2          1         New 1         1     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4:           2          2         New 1         1     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5:           3          1         New 2         1     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6:           3          2         New 2         1     0</span>
<span class="r-in"><span><span class="va">transmod_data</span><span class="op">[</span>, <span class="va">new2</span> <span class="op">:=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">strategy_name</span> <span class="op">==</span> <span class="st">"New 2"</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    strategy_id patient_id strategy_name intercept  new1  new2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          &lt;num&gt;      &lt;int&gt;        &lt;char&gt;     &lt;num&gt; &lt;num&gt; &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:           1          1           SOC         1     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:           1          2           SOC         1     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:           2          1         New 1         1     1     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4:           2          2         New 1         1     1     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5:           3          1         New 2         1     0     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6:           3          2         New 2         1     0     1</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Parameters</span></span></span>
<span class="r-in"><span><span class="va">n</span> <span class="op">&lt;-</span> <span class="fl">10</span></span></span>
<span class="r-in"><span><span class="va">transmod_params</span> <span class="op">&lt;-</span> <span class="fu"><a href="params_mlogit_list.html">params_mlogit_list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  </span></span>
<span class="r-in"><span>  <span class="co">## Transitions from stable state (stable -&gt; progression, stable -&gt; death)</span></span></span>
<span class="r-in"><span>  stable <span class="op">=</span> <span class="fu"><a href="params_mlogit.html">params_mlogit</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    coefs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>      progression <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>        intercept <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span>, <span class="op">-</span><span class="fl">0.65</span>, <span class="fl">.1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>        new1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span>, <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fl">.8</span><span class="op">)</span>, <span class="fl">.02</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>        new2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span>, <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fl">.7</span>, <span class="fl">.02</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>      <span class="op">)</span>,</span></span>
<span class="r-in"><span>      death <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>        intercept <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span>, <span class="op">-</span><span class="fl">3.75</span>, <span class="fl">.1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>        new1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="va">n</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>        new2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="va">n</span><span class="op">)</span></span></span>
<span class="r-in"><span>      <span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  </span></span>
<span class="r-in"><span>  <span class="co">## Transition from progression state (progression -&gt; death)</span></span></span>
<span class="r-in"><span>  progression <span class="op">=</span> <span class="fu"><a href="params_mlogit.html">params_mlogit</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    coefs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>      death <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>        intercept <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span>, <span class="fl">2.45</span>, <span class="fl">.1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>        new1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="va">n</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>        new2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="va">n</span><span class="op">)</span></span></span>
<span class="r-in"><span>      <span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">transmod_params</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A "params_mlogit_list" object</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Summary of coefficients:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           from          to      term       mean         sd       2.5%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         &lt;char&gt;      &lt;char&gt;    &lt;char&gt;      &lt;num&gt;      &lt;num&gt;      &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:      stable progression intercept -0.6634794 0.05869755 -0.7388932</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:      stable progression      new1 -0.2152838 0.01251555 -0.2372537</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:      stable progression      new2 -0.2360914 1.24487406 -2.0402193</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4:      stable       death intercept -3.7448951 0.09512508 -3.8635279</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5:      stable       death      new1  0.0000000 0.00000000  0.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6:      stable       death      new2  0.0000000 0.00000000  0.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7: progression       death intercept  2.4654098 0.07608317  2.3275534</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8: progression       death      new1  0.0000000 0.00000000  0.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9: progression       death      new2  0.0000000 0.00000000  0.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         97.5%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1: -0.5587877</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2: -0.1993740</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:  1.9666138</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4: -3.6104667</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5:  0.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6:  0.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7:  2.5418337</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8:  0.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9:  0.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Number of parameter samples: 10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Number of starting (non-absorbing) states: 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Number of transitions by starting state: 2 1</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Simulation model</span></span></span>
<span class="r-in"><span><span class="va">tmat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>              <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>              <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">transmod</span> <span class="op">&lt;-</span> <span class="fu"><a href="create_CohortDtstmTrans.html">create_CohortDtstmTrans</a></span><span class="op">(</span><span class="va">transmod_params</span>, </span></span>
<span class="r-in"><span>                                    input_data <span class="op">=</span> <span class="va">transmod_data</span>,</span></span>
<span class="r-in"><span>                                    trans_mat <span class="op">=</span> <span class="va">tmat</span>, cycle_length <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">transmod</span><span class="op">$</span><span class="fu">sim_stateprobs</span><span class="op">(</span>n_cycles <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      sample strategy_id patient_id grp_id state_id     t        prob</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       &lt;num&gt;       &lt;int&gt;      &lt;int&gt;  &lt;int&gt;    &lt;num&gt; &lt;num&gt;       &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1:      1           1          1      1        1     0 1.000000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   2:      1           1          1      1        1     1 0.644542208</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   3:      1           1          1      1        1     2 0.415434658</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   4:      1           1          1      1        2     0 0.000000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   5:      1           1          1      1        2     1 0.338329178</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  ---                                                                </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 536:     10           3          2      1        2     1 0.842673723</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 537:     10           3          2      1        2     2 0.191956639</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 538:     10           3          2      1        3     0 0.000000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 539:     10           3          2      1        3     1 0.003998375</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 540:     10           3          2      1        3     2 0.784533916</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># \dontshow{</span></span></span>
<span class="r-in"><span>  <span class="va">pb</span> <span class="op">&lt;-</span> <span class="fu"><a href="expmat.html">expmat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/coef.html" class="external-link">coef</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span><span class="op">$</span><span class="va">baseline</span><span class="op">)</span><span class="op">[</span>, , <span class="fl">1</span><span class="op">]</span></span></span>
<span class="r-in"><span>  </span></span>
<span class="r-in"><span>  <span class="co">## From stable</span></span></span>
<span class="r-in"><span>  <span class="va">b1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">pb</span><span class="op">[</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">]</span><span class="op">/</span><span class="op">(</span><span class="fl">1</span> <span class="op">-</span> <span class="va">pb</span><span class="op">[</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">]</span> <span class="op">-</span> <span class="va">pb</span><span class="op">[</span><span class="fl">1</span>, <span class="fl">3</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">b2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">pb</span><span class="op">[</span><span class="fl">1</span>, <span class="fl">3</span><span class="op">]</span><span class="op">/</span><span class="op">(</span><span class="fl">1</span> <span class="op">-</span> <span class="va">pb</span><span class="op">[</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">]</span> <span class="op">-</span> <span class="va">pb</span><span class="op">[</span><span class="fl">1</span>, <span class="fl">3</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="va">b1</span><span class="op">)</span><span class="op">/</span><span class="op">(</span><span class="fl">1</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="va">b1</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="va">b2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.3379348</span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="va">b2</span><span class="op">)</span><span class="op">/</span><span class="op">(</span><span class="fl">1</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="va">b1</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="va">b2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.01522282</span>
<span class="r-in"><span>  </span></span>
<span class="r-in"><span>  <span class="co">### From progression</span></span></span>
<span class="r-in"><span>  <span class="va">b</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Logistic.html" class="external-link">qlogis</a></span><span class="op">(</span><span class="va">pb</span><span class="op">[</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Devin Incerti, Jeroen P. Jansen, Mark Clements.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer></div>

  


  

  </body></html>

